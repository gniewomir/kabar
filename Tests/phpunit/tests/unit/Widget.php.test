<?php

class WidgetTests extends WP_UnitTestCase {

    public function setUp() {
        $this->kabar  = new \kabar\Kabar();
        $this->expectedConfig = array(
            'id'          => KABAR_NAMESPACE.'_Widget',
            'title'       => 'Widget Title',
            'description' => 'Widget Description',
            'css_classes' => 'fixtures-Widget-Widget fixtures-Widget-Widget-Widget test-widget-css-class',
            'template'    => KABAR_FIXTURES_DIR.'Widget/Widget/Templates/Test.php',
        );
        $this->widget = new \fixtures\Widget\Widget\Widget(
            'Widget',
            'Widget Title',
            'Widget Description',
            'test-widget-css-class',
            'Test.php'
        );
        $this->form     = new \kabar\Utility\Form\Form('WidgetForm');
        $this->form->addFields(
            new \kabar\Utility\Fields\Text('testField', 'Test field title')
        );
        $this->template = new \kabar\Utility\Template\Template();
        $this->template->prop = 'test';
    }

    public function testForm_ShouldTakeAndReturnTheSameFormObject() {
        $this->assertTrue(
            ($this->form === $this->widget->form($this->form))
        );
    }

    public function testRender_ShouldTakeAndReturnTheSameTemplate() {
        $this->assertTrue(
            ($this->template === $this->widget->render($this->template))
        );
    }

    public function testGetConfig_ShouldReturnParsedConstructorParameters() {
        $this->assertEquals(
            $this->expectedConfig,
            $this->widget->getConfig()
        );
    }
}
